<!--begin::Header Menu Wrapper-->
<div #headerMenuOffcanvas class="header-menu-wrapper header-menu-wrapper-left" id="kt_header_menu_wrapper">


  <div class="header-menu">
    <h1 class="title-sc title-school" [matTooltip]="shoolName" >{{shoolName}}</h1>

    <div class="menu-top-right">
      <a (click)="goToSendMail()" class="btn-top"
         *ngIf="currentRouteUrl !== '/system/parents/home' &&
                currentRouteUrl !== '/system/school/view-timetable' &&
                currentRouteUrl !== '/system/school/inbox-student' &&
                !(currentRouteUrl + '').includes('system/parents/student-profile') &&
                currentRouteUrl !== '/system/diligence' && checkRole()"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0)">
            <path
              d="M7.09839 4.88926H12.9017C13.2253 4.88926 13.4876 4.63332 13.4876 4.31761C13.4876 4.00191 13.2253 3.74597 12.9017 3.74597H7.09839C6.77479 3.74597 6.51245 4.00191 6.51245 4.31761C6.51245 4.63332 6.77479 4.88926 7.09839 4.88926Z"
              fill="#8F95B2"/>
            <path
              d="M7.09839 7.61612H12.9017C13.2253 7.61612 13.4876 7.36017 13.4876 7.04447C13.4876 6.72877 13.2253 6.47282 12.9017 6.47282H7.09839C6.77479 6.47282 6.51245 6.72877 6.51245 7.04447C6.51245 7.36017 6.77479 7.61612 7.09839 7.61612Z"
              fill="#8F95B2"/>
            <path
              d="M19.6386 5.36753L16.9823 4.29218V0.815546C16.9823 0.499845 16.72 0.2439 16.3964 0.2439H3.60363C3.28004 0.2439 3.0177 0.499845 3.0177 0.815546V4.29215L0.361367 5.36753C0.142578 5.45609 0 5.66444 0 5.8955V18.2737C0 18.5894 0.262344 18.8453 0.585938 18.8453H19.4141C19.7377 18.8453 20 18.5894 20 18.2737V5.8955C20 5.66444 19.8574 5.45609 19.6386 5.36753ZM1.17188 7.26776L6.61809 12.5385L1.17188 17.0402V7.26776ZM10 11.2416L17.8161 17.702H2.18395L10 11.2416ZM13.3819 12.5385L18.8281 7.26776V17.0402L13.3819 12.5385ZM18.3765 6.09439L16.9823 7.44371V5.52999L18.3765 6.09439ZM15.8104 1.38719V8.57782L12.4844 11.7967L10.3788 10.0562C10.1602 9.87557 9.83977 9.87557 9.62121 10.0562L7.51555 11.7967L4.18953 8.57782V1.38719H15.8104ZM3.0177 7.44371L1.62348 6.09439L3.0177 5.52999V7.44371Z"
              fill="#8F95B2"/>
          </g>
          <defs>
            <clipPath id="clip0">
              <rect width="20" height="19.5122" fill="white" transform="translate(0 0.243896)"/>
            </clipPath>
          </defs>
        </svg>
        {{'MENU.CONTACT.TITLE' | translate}}
      </a>
      <a (click)="goToHref()" class="btn-top">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0)">
            <mask id="path-1-inside-1" fill="white">
              <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M8.60712 2.17427C8.60712 1.59456 8.39079 0.243884 9.68302 0.243884C10.9753 0.243884 10.7589 1.59456 10.7589 2.17427"/>
            </mask>
            <path
              d="M7.40712 2.17427C7.40712 2.12943 7.40495 2.07225 7.40115 1.9689C7.39774 1.87585 7.39356 1.75644 7.39351 1.6286C7.3934 1.38121 7.40759 1.03898 7.49965 0.687576C7.59325 0.330297 7.78682 -0.109349 8.19767 -0.454649C8.62089 -0.810355 9.14335 -0.956116 9.68302 -0.956116V1.44388C9.57657 1.44388 9.64148 1.46696 9.74183 1.38262C9.8298 1.30869 9.83515 1.24294 9.82131 1.2958C9.80592 1.35452 9.79343 1.45867 9.79351 1.62757C9.79354 1.70788 9.79617 1.7891 9.79954 1.88088C9.80253 1.96235 9.80712 2.07419 9.80712 2.17427H7.40712ZM9.68302 -0.956116C10.2227 -0.956116 10.7451 -0.810355 11.1684 -0.454649C11.5792 -0.109349 11.7728 0.330297 11.8664 0.687576C11.9584 1.03898 11.9726 1.38121 11.9725 1.6286C11.9725 1.75644 11.9683 1.87585 11.9649 1.9689C11.9611 2.07225 11.9589 2.12943 11.9589 2.17427H9.55892C9.55892 2.07419 9.56351 1.96235 9.5665 1.88088C9.56987 1.7891 9.5725 1.70788 9.57253 1.62757C9.5726 1.45867 9.56012 1.35452 9.54473 1.2958C9.53088 1.24294 9.53624 1.30869 9.62421 1.38262C9.72455 1.46696 9.78947 1.44388 9.68302 1.44388V-0.956116Z"
              fill="#8F95B2" mask="url(#path-1-inside-1)"/>
            <path
              d="M2.7518 9.70558C2.7518 5.87752 5.85506 2.77427 9.68311 2.77427C13.5112 2.77427 16.6144 5.87753 16.6144 9.70559V14.3969C16.6144 14.5734 16.6791 14.7439 16.7963 14.8761C16.7963 14.8761 16.7963 14.8761 16.7963 14.8761L17.442 15.6041C17.6709 15.8622 17.4877 16.2695 17.1427 16.2695H2.2235C1.87857 16.2695 1.69537 15.8622 1.92423 15.6041L2.56991 14.8761C2.56991 14.8761 2.56991 14.8761 2.56992 14.8761C2.6871 14.7439 2.7518 14.5735 2.7518 14.3969V9.70558Z"
              stroke="#8F95B2" stroke-width="1.2"/>
            <mask id="path-4-inside-2" fill="white">
              <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M7.53125 17.6568C7.53125 18.8162 8.49464 19.7561 9.68305 19.7561C10.8715 19.7561 11.8349 18.8162 11.8349 17.6568"/>
            </mask>
            <path
              d="M6.33125 17.6568C6.33125 19.5067 7.86001 20.9561 9.68305 20.9561V18.5561C9.12928 18.5561 8.73125 18.1257 8.73125 17.6568H6.33125ZM9.68305 20.9561C11.5061 20.9561 13.0349 19.5067 13.0349 17.6568H10.6349C10.6349 18.1257 10.2368 18.5561 9.68305 18.5561V20.9561Z"
              fill="#8F95B2" mask="url(#path-4-inside-2)"/>
          </g>
          <defs>
            <clipPath id="clip0">
              <rect width="20" height="19.5122" fill="white" transform="translate(0 0.243896)"/>
            </clipPath>
          </defs>
        </svg>
        {{'MENU.NEWS.TITLE' | translate}}
        <div class="number f12" *ngIf="totalReceived">{{totalReceived > 0 ? totalReceived : ''}}</div>
      </a>
      <div class="info-user hidden-sm">
        <div class="avata-right text-uppercase">
          {{abbName}}
        </div>
        <span class="title-user">{{currentUser.fullName}}</span>
        <ul class="action-user">
          <li (click)="goToAccount()" *ngIf="shouldShowGoToAccount">
            <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M8 13.175C3.68538 13.175 0 13.855 0 16.575C0 19.296 3.66237 20 8 20C12.3146 20 16 19.321 16 16.6C16 13.879 12.3386 13.175 8 13.175Z"
                fill="#696F8C"/>
              <path opacity="0.4"
                    d="M8.00001 10.5841C10.9391 10.5841 13.294 8.22904 13.294 5.29203C13.294 2.35501 10.9391 0 8.00001 0C5.06191 0 2.70602 2.35501 2.70602 5.29203C2.70602 8.22904 5.06191 10.5841 8.00001 10.5841Z"
                    fill="#696F8C"/>
            </svg>
            {{'ACCOUNT.ACC_MNG' | translate}}
          </li>
          <li (click)="goToChangePass()">
            <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M4.7688 6.71384H13.2312C15.5886 6.71384 17.5 8.58304 17.5 10.8885V15.8253C17.5 18.1308 15.5886 20 13.2312 20H4.7688C2.41136 20 0.5 18.1308 0.5 15.8253V10.8885C0.5 8.58304 2.41136 6.71384 4.7688 6.71384ZM8.99492 15.3295C9.49283 15.3295 9.88912 14.9419 9.88912 14.455V12.2489C9.88912 11.7719 9.49283 11.3844 8.99492 11.3844C8.50717 11.3844 8.11088 11.7719 8.11088 12.2489V14.455C8.11088 14.9419 8.50717 15.3295 8.99492 15.3295Z"
                    fill="#696F8C"/>
              <path opacity="0.4"
                    d="M14.5228 5.39595V6.86667C14.1672 6.7673 13.7912 6.71761 13.4051 6.71761H12.7446V5.39595C12.7446 3.37868 11.0679 1.73903 9.00518 1.73903C6.94242 1.73903 5.26579 3.36874 5.25563 5.37608V6.71761H4.6053C4.20901 6.71761 3.83304 6.7673 3.47739 6.87661V5.39595C3.48755 2.41476 5.95676 0 8.98486 0C12.0536 0 14.5228 2.41476 14.5228 5.39595Z"
                    fill="#696F8C"/>
            </svg>
            {{'ACCOUNT.CHANGE_PW' | translate}}
          </li>
          <li style="color: #D73B50;" (click)="logout()">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.4"
                    d="M0 4.447C0 1.996 2.03024 0 4.52453 0H9.48564C11.9748 0 14 1.99 14 4.437V15.553C14 18.005 11.9698 20 9.47445 20H4.51537C2.02515 20 0 18.01 0 15.563V14.623V4.447Z"
                    fill="#F26522"/>
              <path
                d="M19.7789 9.4548L16.9331 6.5458C16.639 6.2458 16.1657 6.2458 15.8725 6.5478C15.5803 6.8498 15.5813 7.3368 15.8745 7.6368L17.4337 9.2298H15.9387H7.54844C7.13452 9.2298 6.79852 9.5748 6.79852 9.9998C6.79852 10.4258 7.13452 10.7698 7.54844 10.7698H17.4337L15.8745 12.3628C15.5813 12.6628 15.5803 13.1498 15.8725 13.4518C16.0196 13.6028 16.2114 13.6788 16.4043 13.6788C16.5952 13.6788 16.787 13.6028 16.9331 13.4538L19.7789 10.5458C19.9201 10.4008 20 10.2048 20 9.9998C20 9.7958 19.9201 9.5998 19.7789 9.4548Z"
                fill="#F26522"/>
            </svg>
            {{'ACCOUNT.LOGOUT' | translate}}
          </li>
        </ul>
      </div>

    </div>

  </div>
</div>
<!--end::Header Menu Wrapper-->

<ng-template #menuTemplate let-item="item" let-parentItem="parentItem">
  <li [attr.aria-haspopup]="true"
    [attr.data-menu-toggle]="getItemAttrSubmenuToggle(item)"
    [ngClass]="getItemCssClasses(item)">

    <!-- if item has submenu -->
    <ng-container *ngIf="item.submenu">
      <a href="javascript:;" class="menu-link menu-toggle">

        <ng-container [ngTemplateOutlet]="menuItemInnerTemplate" [ngTemplateOutletContext]="{ item: item, parentItem: parentItem }"></ng-container>

        <ng-container *ngIf="rootArrowEnabled">
          <!-- arrow icons -->
          <i *ngIf="item.submenu && item.root" class="menu-arrow"></i>
        </ng-container>
        <!-- else arrow icons -->
        <i *ngIf="item.submenu && !item.root" class="menu-arrow"></i>
      </a>
    </ng-container>

    <!-- if item hasn't sumbenu -->
    <ng-container *ngIf="!item.submenu">
      <a [routerLink]="item.page" class="menu-link">
        <ng-container [ngTemplateOutlet]="menuItemInnerTemplate" [ngTemplateOutletContext]="{ item: item, parentItem: parentItem }"></ng-container>
      </a>
    </ng-container>

    <!-- if menu item has submenu child then recursively call new menu item component -->
    <ng-container *ngIf="item.submenu">
      <div class="menu-submenu" [ngClass]="getItemMenuSubmenuClass(item)" [ngStyle]="{ 'width': item.submenu.width }">
        <span class="menu-arrow" [ngClass]="{ 'menu-arrow-adjust': item.root }"></span>

        <ul *ngIf="item.submenu?.length" class="menu-subnav">
          <ng-container *ngFor="let child of item.submenu">
            <ng-container [ngTemplateOutlet]="menuTemplate" [ngTemplateOutletContext]="{ item: child, parentItem: item }">
            </ng-container>
          </ng-container>
        </ul>

        <ul *ngIf="item.submenu.items?.length" class="menu-subnav">
          <ng-container *ngFor="let child of item.submenu.items">
            <ng-container [ngTemplateOutlet]="menuTemplate" [ngTemplateOutletContext]="{ item: child, parentItem: item }">
            </ng-container>
          </ng-container>
        </ul>

        <div *ngIf="item.submenu.type === 'mega' && item.submenu.columns?.length" class="menu-subnav">
          <ul class="menu-content">
            <ng-container *ngFor="let child of item.submenu.columns">
              <ng-container [ngTemplateOutlet]="menuColumnTemplate" [ngTemplateOutletContext]="{ item: child }"></ng-container>
            </ng-container>
          </ul>
        </div>

      </div>
    </ng-container>
  </li>
</ng-template>

<!-- item inner -->
<ng-template #menuItemInnerTemplate let-item="item" let-parentItem="parentItem">
  <!-- if menu item has icon -->
  <ng-container *ngIf="item.icon">
    <i class="menu-icon" [ngClass]="item.icon"></i>
  </ng-container>

  <ng-container *ngIf="!item.icon">
    <!-- if menu item using bullet -->
    <i *ngIf="parentItem && parentItem.bullet === 'dot' || item.bullet === 'dot'"
      class="menu-link-bullet menu-link-bullet--dot">
      <span></span>
    </i>
    <i *ngIf="parentItem && parentItem.bullet === 'line' || item.bullet === 'line'"
      class="menu-link-bullet menu-link-bullet--line">
      <span></span>
    </i>
  </ng-container>

  <ng-container *ngIf="!item.badge; else menuLinkBadge">
    <span class="menu-item-here"></span>
    <!-- menu item title text -->
    <span class="menu-text" [translate]="item.translate">
      {{item.title}}
    </span>
  </ng-container>

  <ng-template #menuLinkBadge>
    <!-- menu item with badge -->
    <span class="menu-text" [translate]="item.translate">{{item.title}}</span>
    <span class="menu-link-badge">
      <span
        class="kt-badge kt-badge--brand kt-badge--inline kt-badge--pill" [ngClass]="item.badge.type" [translate]="item.badge.translate">{{item.badge.value}}</span>
    </span>
  </ng-template>
</ng-template>

<!-- item column -->
<ng-template #menuColumnTemplate let-item="item">
  <li class="menu-item">
    <h3 class="menu-heading menu-toggle">
      <span class="menu-text" [translate]="item.heading.translate">
        {{item.heading.title}}
      </span>
      <i class="menu-ver-arrow la la-angle-right"></i>
    </h3>
    <ng-container *ngIf="item.items?.length">
      <ul class="menu-inner">
        <ng-container *ngFor="let child of item.items">
          <ng-container [ngTemplateOutlet]="menuTemplate" [ngTemplateOutletContext]="{ item: child, parentItem: item }">
          </ng-container>
        </ng-container>
      </ul>
    </ng-container>
  </li>
</ng-template>
